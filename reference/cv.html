<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Cross-Validate Regression Models — cv • cv</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Cross-Validate Regression Models — cv"><meta name="description" content="cv() is a parallelized generic k-fold (including n-fold, i.e., leave-one-out)
cross-validation function, with a default method,
specific methods for linear and generalized-linear models that can be much
more computationally efficient, and a method for robust linear models.
There are also cv() methods for mixed-effects models,
for model-selection procedures,
and for several models fit to the same data,
which are documented separately."><meta property="og:description" content="cv() is a parallelized generic k-fold (including n-fold, i.e., leave-one-out)
cross-validation function, with a default method,
specific methods for linear and generalized-linear models that can be much
more computationally efficient, and a method for robust linear models.
There are also cv() methods for mixed-effects models,
for model-selection procedures,
and for several models fit to the same data,
which are documented separately."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">cv</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">2.0.4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/cv.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/cv-extend.html">Extending the cv package</a></li>
    <li><a class="dropdown-item" href="../articles/cv-mixed.html">Cross-validating mixed-effects models</a></li>
    <li><a class="dropdown-item" href="../articles/cv-notes.html">Computational and technical notes on cross-validating regression models</a></li>
    <li><a class="dropdown-item" href="../articles/cv-selection.html">Cross-validating model selection</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/gmonette/cv/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Cross-Validate Regression Models</h1>
      <small class="dont-index">Source: <a href="https://github.com/gmonette/cv/blob/main/R/cv.R" class="external-link"><code>R/cv.R</code></a></small>
      <div class="d-none name"><code>cv.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>cv()</code> is a parallelized generic k-fold (including n-fold, i.e., leave-one-out)
cross-validation function, with a default method,
specific methods for linear and generalized-linear models that can be much
more computationally efficient, and a method for robust linear models.
There are also <code>cv()</code> methods for <a href="cv.merMod.html">mixed-effects models</a>,
for <a href="cv.function.html">model-selection procedures</a>,
and for <a href="cv.modList.html">several models fit to the same data</a>,
which are documented separately.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">cv</span><span class="op">(</span><span class="va">model</span>, <span class="va">data</span>, <span class="va">criterion</span>, <span class="va">k</span>, reps <span class="op">=</span> <span class="fl">1L</span>, <span class="va">seed</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Default S3 method</span></span>
<span><span class="fu">cv</span><span class="op">(</span></span>
<span>  <span class="va">model</span>,</span>
<span>  data <span class="op">=</span> <span class="fu">insight</span><span class="fu">::</span><span class="fu"><a href="https://easystats.github.io/insight/reference/get_data.html" class="external-link">get_data</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span>,</span>
<span>  criterion <span class="op">=</span> <span class="va">mse</span>,</span>
<span>  k <span class="op">=</span> <span class="fl">10L</span>,</span>
<span>  reps <span class="op">=</span> <span class="fl">1L</span>,</span>
<span>  seed <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  criterion.name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/deparse.html" class="external-link">deparse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">substitute</a></span><span class="op">(</span><span class="va">criterion</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  details <span class="op">=</span> <span class="va">k</span> <span class="op">&lt;=</span> <span class="fl">10L</span>,</span>
<span>  confint <span class="op">=</span> <span class="va">n</span> <span class="op">&gt;=</span> <span class="fl">400L</span>,</span>
<span>  level <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>  ncores <span class="op">=</span> <span class="fl">1L</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"response"</span>,</span>
<span>  start <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">model.function</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'lm'</span></span>
<span><span class="fu">cv</span><span class="op">(</span></span>
<span>  <span class="va">model</span>,</span>
<span>  data <span class="op">=</span> <span class="fu">insight</span><span class="fu">::</span><span class="fu"><a href="https://easystats.github.io/insight/reference/get_data.html" class="external-link">get_data</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span>,</span>
<span>  criterion <span class="op">=</span> <span class="va">mse</span>,</span>
<span>  k <span class="op">=</span> <span class="fl">10L</span>,</span>
<span>  reps <span class="op">=</span> <span class="fl">1L</span>,</span>
<span>  seed <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  details <span class="op">=</span> <span class="va">k</span> <span class="op">&lt;=</span> <span class="fl">10L</span>,</span>
<span>  confint <span class="op">=</span> <span class="va">n</span> <span class="op">&gt;=</span> <span class="fl">400L</span>,</span>
<span>  level <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>  method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"auto"</span>, <span class="st">"hatvalues"</span>, <span class="st">"Woodbury"</span>, <span class="st">"naive"</span><span class="op">)</span>,</span>
<span>  ncores <span class="op">=</span> <span class="fl">1L</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'glm'</span></span>
<span><span class="fu">cv</span><span class="op">(</span></span>
<span>  <span class="va">model</span>,</span>
<span>  data <span class="op">=</span> <span class="fu">insight</span><span class="fu">::</span><span class="fu"><a href="https://easystats.github.io/insight/reference/get_data.html" class="external-link">get_data</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span>,</span>
<span>  criterion <span class="op">=</span> <span class="va">mse</span>,</span>
<span>  k <span class="op">=</span> <span class="fl">10L</span>,</span>
<span>  reps <span class="op">=</span> <span class="fl">1L</span>,</span>
<span>  seed <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  details <span class="op">=</span> <span class="va">k</span> <span class="op">&lt;=</span> <span class="fl">10L</span>,</span>
<span>  confint <span class="op">=</span> <span class="va">n</span> <span class="op">&gt;=</span> <span class="fl">400L</span>,</span>
<span>  level <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>  method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"exact"</span>, <span class="st">"hatvalues"</span>, <span class="st">"Woodbury"</span><span class="op">)</span>,</span>
<span>  ncores <span class="op">=</span> <span class="fl">1L</span>,</span>
<span>  start <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'rlm'</span></span>
<span><span class="fu">cv</span><span class="op">(</span><span class="va">model</span>, <span class="va">data</span>, <span class="va">criterion</span>, <span class="va">k</span>, reps <span class="op">=</span> <span class="fl">1L</span>, <span class="va">seed</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'cv'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">x</span>, digits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"digits"</span><span class="op">)</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'cv'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">object</span>, digits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"digits"</span><span class="op">)</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'cvList'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'cvList'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">object</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'cv'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, what <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CV criterion"</span>, <span class="st">"coefficients"</span><span class="op">)</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'cvList'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">y</span>,</span>
<span>  what <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"adjusted CV criterion"</span>, <span class="st">"CV criterion"</span><span class="op">)</span>,</span>
<span>  confint <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">cvInfo</span><span class="op">(</span><span class="va">object</span>, <span class="va">what</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'cv'</span></span>
<span><span class="fu">cvInfo</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  what <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CV criterion"</span>, <span class="st">"adjusted CV criterion"</span>, <span class="st">"full CV criterion"</span>, <span class="st">"confint"</span>, <span class="st">"SE"</span>,</span>
<span>    <span class="st">"k"</span>, <span class="st">"seed"</span>, <span class="st">"method"</span>, <span class="st">"criterion name"</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'cvModList'</span></span>
<span><span class="fu">cvInfo</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  what <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CV criterion"</span>, <span class="st">"adjusted CV criterion"</span>, <span class="st">"full CV criterion"</span>, <span class="st">"confint"</span>, <span class="st">"SE"</span>,</span>
<span>    <span class="st">"k"</span>, <span class="st">"seed"</span>, <span class="st">"method"</span>, <span class="st">"criterion name"</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'cvList'</span></span>
<span><span class="fu">cvInfo</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  what <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CV criterion"</span>, <span class="st">"adjusted CV criterion"</span>, <span class="st">"full CV criterion"</span>, <span class="st">"confint"</span>, <span class="st">"SE"</span>,</span>
<span>    <span class="st">"k"</span>, <span class="st">"seed"</span>, <span class="st">"method"</span>, <span class="st">"criterion name"</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'cv'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  row.names <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  optional <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  rows <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cv"</span>, <span class="st">"folds"</span><span class="op">)</span>,</span>
<span>  columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"criteria"</span>, <span class="st">"coefficients"</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'cvList'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">x</span>, row.names <span class="op">=</span> <span class="cn">NULL</span>, optional <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'cvDataFrame'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">x</span>, digits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"digits"</span><span class="op">)</span> <span class="op">-</span> <span class="fl">2L</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'cvDataFrame'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  <span class="va">formula</span>,</span>
<span>  subset <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  fun <span class="op">=</span> <span class="va">mean</span>,</span>
<span>  include <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cv"</span>, <span class="st">"folds"</span>, <span class="st">"all"</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-model">model<a class="anchor" aria-label="anchor" href="#arg-model"></a></dt>
<dd><p>a regression model object (see Details).</p></dd>


<dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>data frame to which the model was fit (not usually necessary).</p></dd>


<dt id="arg-criterion">criterion<a class="anchor" aria-label="anchor" href="#arg-criterion"></a></dt>
<dd><p>cross-validation criterion ("cost" or lack-of-fit) function of form <code>f(y, yhat)</code>
where <code>y</code> is the observed values of the response and
<code>yhat</code> the predicted values; the default is <code><a href="cost-functions.html">mse</a></code>
(the mean-squared error).</p></dd>


<dt id="arg-k">k<a class="anchor" aria-label="anchor" href="#arg-k"></a></dt>
<dd><p>perform k-fold cross-validation (default is <code>10</code>); <code>k</code>
may be a number or <code>"loo"</code> or <code>"n"</code> for n-fold (leave-one-out)
cross-validation.</p></dd>


<dt id="arg-reps">reps<a class="anchor" aria-label="anchor" href="#arg-reps"></a></dt>
<dd><p>number of times to replicate k-fold CV (default is <code>1</code>).</p></dd>


<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>for R's random number generator; optional, if not
supplied a random seed will be selected and saved; not needed
for n-fold cross-validation.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>to match generic; passed to <code><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict()</a></code> for the default <code>cv()</code> method;
passed to the <code><a href="https://rdrr.io/pkg/car/man/Tapply.html" class="external-link">Tapply</a>()</code> function in the <span class="pkg">car</span> package for
<code>summary.cvDataFrame()</code>; passed to default <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a>()</code> method for
<code>plot.cvList()</code> or <code>plot.cv()</code>.</p></dd>


<dt id="arg-criterion-name">criterion.name<a class="anchor" aria-label="anchor" href="#arg-criterion-name"></a></dt>
<dd><p>a character string giving the name of the CV criterion function
in the returned <code>"cv"</code> object (not usually needed).</p></dd>


<dt id="arg-details">details<a class="anchor" aria-label="anchor" href="#arg-details"></a></dt>
<dd><p>if <code>TRUE</code> (the default if the number of
folds <code>k &lt;= 10</code>), save detailed information about the value of the
CV criterion for the cases in each fold and the regression coefficients
with that fold deleted.</p></dd>


<dt id="arg-confint">confint<a class="anchor" aria-label="anchor" href="#arg-confint"></a></dt>
<dd><p>if <code>TRUE</code> (the default if the number of cases is 400
or greater), compute a confidence interval for the bias-corrected CV
criterion, if the criterion is the average of casewise components;
for <code>plot.cvList()</code>, whether to plot confidence intervals around the
biased-adjusted CV criterion, defaulting to <code>TRUE</code> and applicable only
if confidence intervals are included in the <code>"cv"</code> object.</p></dd>


<dt id="arg-level">level<a class="anchor" aria-label="anchor" href="#arg-level"></a></dt>
<dd><p>confidence level (default <code>0.95</code>).</p></dd>


<dt id="arg-ncores">ncores<a class="anchor" aria-label="anchor" href="#arg-ncores"></a></dt>
<dd><p>number of cores to use for parallel computations
(default is <code>1</code>, i.e., computations aren't done in parallel).</p></dd>


<dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p>for the default method, value to be passed to the
<code>type</code> argument of <code><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict()</a></code>;
the default is <code>type="response"</code>, which is appropriate, e.g., for a <code>"glm"</code> model
and may be recognized or ignored by <code><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict()</a></code> methods for other model classes.</p></dd>


<dt id="arg-start">start<a class="anchor" aria-label="anchor" href="#arg-start"></a></dt>
<dd><p>if <code>TRUE</code> (the default is <code>FALSE</code>), the <code>start</code> argument
to <code><a href="https://rdrr.io/r/stats/update.html" class="external-link">update</a>()</code> is set to the vector of regression coefficients for the model fit
to the full data, possibly making the CV updates faster, e.g., for a GLM.</p></dd>


<dt id="arg-model-function">model.function<a class="anchor" aria-label="anchor" href="#arg-model-function"></a></dt>
<dd><p>a regression function, typically for a new <code>cv()</code> method that
that calls <code>cv.default()</code> via <code><a href="https://rdrr.io/r/base/UseMethod.html" class="external-link">NextMethod()</a></code>,
residing in a package that's not a declared dependency of the <span class="pkg">cv</span> package,
e.g., <code><a href="https://rdrr.io/pkg/nnet/man/multinom.html" class="external-link">nnet::multinom</a></code>. It's usually not necessary to specify
<code>model.function</code> to make <code>cv.default()</code> work.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>computational method to apply to a linear (i.e., <code>"lm"</code>) model
or to a generalized linear (i.e., <code>"glm"</code>) model. See Details for an explanation
of the available options.</p></dd>


<dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>a <code>"cv"</code>, <code>"cvList"</code>, or <code>"cvDataFrame"</code>
object to be plotted or summarized.</p></dd>


<dt id="arg-digits">digits<a class="anchor" aria-label="anchor" href="#arg-digits"></a></dt>
<dd><p>significant digits for printing,
default taken from the <code>"digits"</code> option.</p></dd>


<dt id="arg-object">object<a class="anchor" aria-label="anchor" href="#arg-object"></a></dt>
<dd><p>an object to summarize or a <code>"cv"</code>, <code>"cvModlist"</code>,
or <code>"cvList"</code> object from which to extract information via <code>cvInfo()</code>.</p></dd>


<dt id="arg-y">y<a class="anchor" aria-label="anchor" href="#arg-y"></a></dt>
<dd><p>to match the <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a>()</code> generic function, ignored.</p></dd>


<dt id="arg-what">what<a class="anchor" aria-label="anchor" href="#arg-what"></a></dt>
<dd><p>for <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> methods, what to plot: for the <code>"cv"</code> method, either <code>"CV criterion"</code>
(the default), or <code>"coefficients"</code>;
for the <code>"cvList"</code> method, either <code>"adjusted CV criterion"</code>
(the default if present in the <code>"cv"</code> object) or <code>"CV object"</code>.</p>
<p>For <code>cvInfo()</code>, the information to extract from a <code>"cv"</code>,
<code>"cvModList"</code>, or <code>"cvList"</code> object,
one of: <code>"CV criterion"</code>, <code>"adjusted CV criterion"</code>,
<code>"full CV criterion"</code> (the CV criterion applied to the model fit to the
full data set), <code>"SE"</code> (the standard error of the adjusted CV criterion),
<code>"confint"</code> (confidence interval for the adjusted CV criterion),
<code>"k"</code>, (the number of folds), <code>"seed"</code> (the seed employed for
R's random-number generator), <code>"method"</code> (the computational method
employed, e.g., for a <code>"lm"</code> model object), or <code>"criterion name"</code>
(the CV criterion employed); not all of these elements may be present, in
which case <code>cvInfo()</code> would return <code>NULL</code>.</p>
<p>Partial matching is supported, so, e.g., <code>cvInfo(cv-object, "adjusted")</code>
is equivalent to <code>cvInfo(cv-object, "adjusted CV criterion")</code></p></dd>


<dt id="arg-row-names">row.names<a class="anchor" aria-label="anchor" href="#arg-row-names"></a></dt>
<dd><p>optional row names for the result,
defaults to <code>NULL</code>.</p></dd>


<dt id="arg-optional">optional<a class="anchor" aria-label="anchor" href="#arg-optional"></a></dt>
<dd><p>to match the <code><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a>()</code> generic function;
if <code>FALSE</code> (the default is <code>TRUE</code>), then the names of the columns
of the returned data frame, including the names of coefficients,
are coerced to syntactically correct names.</p></dd>


<dt id="arg-rows">rows<a class="anchor" aria-label="anchor" href="#arg-rows"></a></dt>
<dd><p>the rows of the resulting data frame to retain: setting
<code>rows="cv"</code> retains rows pertaining to the overall CV result
(marked as "<code>fold 0</code>" ); setting <code>rows="folds"</code> retains
rows pertaining to individual folds 1 through k; the default is
<code>rows = c("cv", "folds")</code>, which retains all rows.</p></dd>


<dt id="arg-columns">columns<a class="anchor" aria-label="anchor" href="#arg-columns"></a></dt>
<dd><p>the columns of the resulting data frame to retain:
setting <code>columns="critera"</code> retains columns pertaining to CV
criteria; setting <code>columns="coefficients"</code> retains columns pertaining
to model coefficients (broadly construed); the default is
<code>columns = c("criteria", "coefficients")</code>, which retains both;
and the columns <code>"model"</code>, <code>"rep"</code>, and <code>"fold"</code>, if present,
are always retained.</p></dd>


<dt id="arg-formula">formula<a class="anchor" aria-label="anchor" href="#arg-formula"></a></dt>
<dd><p>of the form <code>some.criterion ~ classifying.variable(s)</code>
(see examples).</p></dd>


<dt id="arg-subset">subset<a class="anchor" aria-label="anchor" href="#arg-subset"></a></dt>
<dd><p>a subsetting expression; the default (<code>NULL</code>)
is not to subset the <code>"cvDataFrame"</code> object.</p></dd>


<dt id="arg-fun">fun<a class="anchor" aria-label="anchor" href="#arg-fun"></a></dt>
<dd><p>summary function to apply, defaulting to <code>mean</code>.</p></dd>


<dt id="arg-include">include<a class="anchor" aria-label="anchor" href="#arg-include"></a></dt>
<dd><p>which rows of the <code>"cvDataFrame"</code> to include in the
summary. One of <code>"cv"</code> (the default), rows representing the overall CV
results; <code>"folds"</code>, rows for individual folds; <code>"all"</code>, all rows
(generally not sensible).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>The <code>cv()</code> methods return an object of class <code>"cv"</code>, with the CV criterion
(<code>"CV crit"</code>), the bias-adjusted CV criterion (<code>"adj CV crit"</code>),
the criterion for the model applied to the full data (<code>"full crit"</code>),
the confidence interval and level for the bias-adjusted CV criterion (<code>"confint"</code>),
the number of folds (<code>"k"</code>), and the seed for R's random-number
generator (<code>"seed"</code>). If <code>details=TRUE</code>, then the returned object
will also include a <code>"details"</code> component, which is a list of two
elements: <code>"criterion"</code>, containing the CV criterion computed for the
cases in each fold; and <code>"coefficients"</code>, regression coefficients computed
for the model with each fold deleted.  Some methods may return a
subset of these components and may add additional information.
If <code>reps</code> &gt; <code>1</code>, then an object of class <code>"cvList"</code> is returned,
which is literally a list of <code>"cv"</code> objects.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The default <code>cv()</code> method uses <code><a href="https://rdrr.io/r/stats/update.html" class="external-link">update</a>()</code> to refit the model
to each fold, and should work if there are appropriate <code><a href="https://rdrr.io/r/stats/update.html" class="external-link">update()</a></code>
and <code><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a>()</code> methods, and if the default method for <code><a href="cvCompute.html">GetResponse</a>()</code>
works or if a <code><a href="cvCompute.html">GetResponse</a>()</code> method is supplied. The model must, however,
work correctly with <code><a href="https://rdrr.io/r/stats/update.html" class="external-link">update()</a></code>, and in particular not have variables
in the model formula that aren't in the data to which the model was fit: see the last example.</p>
<p>The <code>"lm"</code> and <code>"glm"</code> methods can use much faster computational
algorithms, as selected by the <code>method</code> argument. The linear-model
method accommodates weighted linear models.</p>
<p>For both classes of models, for the leave-one-out (n-fold) case, fitted values
for the folds can be computed from the hat-values via
<code>method="hatvalues"</code> without refitting the model;
for GLMs, this method is approximate, for LMs it is exact.</p>
<p>Again for both classes of models, when more than one case is omitted
in each fold, fitted values may be obtained without refitting the
model by exploiting the Woodbury matrix identity via <code>method="Woodbury"</code>.
As for hatvalues, this method is exact for LMs and approximate for
GLMs.</p>
<p>The default for linear models is <code>method="auto"</code>,
which is equivalent to <code>method="hatvalues"</code> for n-fold cross-validation
and <code>method="Woodbury"</code> otherwise; <code>method="naive"</code> refits
the model via <code><a href="https://rdrr.io/r/stats/update.html" class="external-link">update()</a></code> and is generally much slower. The
default for generalized linear models is <code>method="exact"</code>,
which employs <code><a href="https://rdrr.io/r/stats/update.html" class="external-link">update()</a></code>. This default is conservative, and
it is usually safe to use <code>method="hatvalues"</code> for n-fold CV
or <code>method="Woodbury"</code> for k-fold CV.</p>
<p>There is also a method for robust linear models fit by
<code><a href="https://rdrr.io/pkg/MASS/man/rlm.html" class="external-link">rlm</a>()</code> in the <span class="pkg">MASS</span> package (to avoid
inheriting the <code>"lm"</code> method for which the default <code>"auto"</code>
computational method would be inappropriate).</p>
<p>For additional details, see the "Cross-validating regression models"
vignette (<code><a href="../articles/cv.html">vignette("cv", package="cv")</a></code>).</p>
<p><code>cv()</code> is designed to be extensible to other classes of regression
models; see the "Extending the cv package" vignette
(<code><a href="../articles/cv-extend.html">vignette("cv-extend", package="cv")</a></code>).</p>
    </div>
    <div class="section level2">
    <h2 id="methods-by-class-">Methods (by class)<a class="anchor" aria-label="anchor" href="#methods-by-class-"></a></h2>

<ul><li><p><code>cv(default)</code>: <code>"default"</code> method.</p></li>
<li><p><code>cv(lm)</code>: <code>"lm"</code> method.</p></li>
<li><p><code>cv(glm)</code>: <code>"glm"</code> method.</p></li>
<li><p><code>cv(rlm)</code>: <code>"rlm"</code> method (to avoid inheriting the <code>"lm"</code> method).</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="methods-by-generic-">Methods (by generic)<a class="anchor" aria-label="anchor" href="#methods-by-generic-"></a></h2>

<ul><li><p><code>print(cv)</code>: <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> method for <code>"cv"</code> objects.</p></li>
<li><p><code>summary(cv)</code>: <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> method for <code>"cv"</code> objects.</p></li>
<li><p><code>plot(cv)</code>: <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> method for <code>"cv"</code> objects.</p></li>
<li><p><code>as.data.frame(cv)</code>: <code><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame()</a></code> method for <code>"cv"</code> objects.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="functions">Functions<a class="anchor" aria-label="anchor" href="#functions"></a></h2>

<ul><li><p><code>print(cvList)</code>: <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> method for <code>"cvList"</code> objects.</p></li>
<li><p><code>summary(cvList)</code>: <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> method for <code>"cvList"</code> objects.</p></li>
<li><p><code>plot(cvList)</code>: <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> method for <code>"cvList"</code> objects.</p></li>
<li><p><code>cvInfo()</code>: extract information from a <code>"cv"</code> object.</p></li>
<li><p><code>as.data.frame(cvList)</code>: <code><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame()</a></code> method for <code>"cvList"</code> objects.</p></li>
<li><p><code>print(cvDataFrame)</code>: <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> method for <code>"cvDataFrame"</code> objects.</p></li>
<li><p><code>summary(cvDataFrame)</code>: <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> method for <code>"cvDataFrame"</code> objects.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="cv.merMod.html">cv.merMod</a></code>, <code><a href="cv.function.html">cv.function</a></code>,
<code><a href="cv.modList.html">cv.modList</a></code>.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"ISLR2"</span>, quietly<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/source.html" class="external-link">withAutoprint</a></span><span class="op">(</span><span class="op">{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"Auto"</span>, package<span class="op">=</span><span class="st">"ISLR2"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">m.auto</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">horsepower</span>, data<span class="op">=</span><span class="va">Auto</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">cv</span><span class="op">(</span><span class="va">m.auto</span>,  k<span class="op">=</span><span class="st">"loo"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="fu">cv</span><span class="op">(</span><span class="va">m.auto</span>,  k<span class="op">=</span><span class="st">"loo"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">cv.auto</span> <span class="op">&lt;-</span> <span class="fu">cv</span><span class="op">(</span><span class="va">m.auto</span>, seed<span class="op">=</span><span class="fl">1234</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="cv.function.html">compareFolds</a></span><span class="op">(</span><span class="va">cv.auto</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">cv.auto</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">cv.auto</span>, what<span class="op">=</span><span class="st">"coefficients"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">cv.auto.reps</span> <span class="op">&lt;-</span> <span class="fu">cv</span><span class="op">(</span><span class="va">m.auto</span>, seed<span class="op">=</span><span class="fl">1234</span>, reps<span class="op">=</span><span class="fl">3</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">cvInfo</span><span class="op">(</span><span class="va">cv.auto.reps</span>, what<span class="op">=</span><span class="st">"adjusted CV criterion"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">cv.auto.reps</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu">cv</span><span class="op">(</span><span class="va">m.auto</span>, seed<span class="op">=</span><span class="fl">1234</span>, reps<span class="op">=</span><span class="fl">10</span>, confint<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">D.auto.reps</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">cv.auto.reps</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">D.auto.reps</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">D.auto.reps</span>, <span class="va">mse</span> <span class="op">~</span> <span class="va">rep</span> <span class="op">+</span> <span class="va">fold</span>, include<span class="op">=</span><span class="st">"folds"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">D.auto.reps</span>, <span class="va">mse</span> <span class="op">~</span> <span class="va">rep</span> <span class="op">+</span> <span class="va">fold</span>, include <span class="op">=</span> <span class="st">"folds"</span>,</span></span>
<span class="r-in"><span>        subset <span class="op">=</span> <span class="va">fold</span> <span class="op">&lt;=</span> <span class="fl">5</span><span class="op">)</span> <span class="co"># first 5 folds</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">D.auto.reps</span>, <span class="va">mse</span> <span class="op">~</span> <span class="va">rep</span>, include<span class="op">=</span><span class="st">"folds"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">D.auto.reps</span>, <span class="va">mse</span> <span class="op">~</span> <span class="va">rep</span>, fun<span class="op">=</span><span class="va">sd</span>, include<span class="op">=</span><span class="st">"folds"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\n install 'ISLR2' package to run these examples\n"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; data("Auto", package = "ISLR2")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; m.auto &lt;- lm(mpg ~ horsepower, data = Auto)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; cv(m.auto, k = "loo")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cross-validation criterion (mse) = 24.23151 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; summary(cv(m.auto, k = "loo"))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> n-Fold Cross Validation</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> method: hatvalues</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> criterion: mse</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cross-validation criterion = 24.23151</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; summary(cv.auto &lt;- cv(m.auto, seed = 1234))</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> R RNG seed set to 1234</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10-Fold Cross Validation</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> method: Woodbury</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> criterion: mse</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cross-validation criterion = 24.3794</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> bias-adjusted cross-validation criterion = 24.35646</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> full-sample criterion = 23.94366</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; compareFolds(cv.auto)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> CV criterion by folds:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   fold.1   fold.2   fold.3   fold.4   fold.5   fold.6   fold.7   fold.8 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24.31128 18.54939 33.52760 22.09623 25.09248 19.56235 29.05875 16.84553 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   fold.9  fold.10 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19.62079 35.28078 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Coefficients by folds:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         (Intercept) horsepower</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fold 1         39.9      -0.16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fold 2         40.3      -0.16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fold 3         39.9      -0.16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fold 4         40.1      -0.16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fold 5         40.0      -0.16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fold 6         39.4      -0.15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fold 7         40.2      -0.16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fold 8         40.1      -0.16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fold 9         39.6      -0.16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fold 10        39.9      -0.16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; plot(cv.auto)</span>
<span class="r-plt img"><img src="cv-1.png" alt="" width="700" height="433"></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; plot(cv.auto, what = "coefficients")</span>
<span class="r-plt img"><img src="cv-2.png" alt="" width="700" height="433"></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; summary(cv.auto.reps &lt;- cv(m.auto, seed = 1234, reps = 3))</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> R RNG seed set to 1234</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> R RNG seed set to 469908</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> R RNG seed set to 267</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Replicate 1:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10-Fold Cross Validation</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> method: Woodbury</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> criterion: mse</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cross-validation criterion = 24.28572</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> bias-adjusted cross-validation criterion = 24.26775</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> full-sample criterion = 23.94366</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Replicate 2:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10-Fold Cross Validation</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> method: Woodbury</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> criterion: mse</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cross-validation criterion = 24.30002</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> bias-adjusted cross-validation criterion = 24.28129</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> full-sample criterion = 23.94366</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Replicate 3:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10-Fold Cross Validation</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> method: Woodbury</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> criterion: mse</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cross-validation criterion = 24.3794</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> bias-adjusted cross-validation criterion = 24.35646</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> full-sample criterion = 23.94366</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Average:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10-Fold Cross Validation</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> method: Woodbury</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> criterion: mse</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cross-validation criterion = 24.31271 (0.04496328)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> bias-adjusted cross-validation criterion = 24.29331 (0.0425791)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> full-sample criterion = 23.94366</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; cvInfo(cv.auto.reps, what = "adjusted CV criterion")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    rep.1    rep.2    rep.3 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24.26775 24.28129 24.35646 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; plot(cv.auto.reps)</span>
<span class="r-plt img"><img src="cv-3.png" alt="" width="700" height="433"></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; plot(cv(m.auto, seed = 1234, reps = 10, confint = TRUE))</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> R RNG seed set to 1234</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> R RNG seed set to 469908</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> R RNG seed set to 267</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> R RNG seed set to 714864</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> R RNG seed set to 79919</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> R RNG seed set to 970687</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> R RNG seed set to 219008</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> R RNG seed set to 967112</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> R RNG seed set to 597697</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> R RNG seed set to 217930</span>
<span class="r-plt img"><img src="cv-4.png" alt="" width="700" height="433"></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; D.auto.reps &lt;- as.data.frame(cv.auto.reps)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; head(D.auto.reps)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   rep fold    mse adjusted.mse full.mse coef.Intercept coef.horsepower</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   1    0 24.286       24.268   23.944         39.936        -0.15784</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   1    1 23.069           NA       NA         39.700        -0.15576</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   1    2 15.671           NA       NA         40.165        -0.15871</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   1    3 25.502           NA       NA         39.694        -0.15634</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   1    4 24.518           NA       NA         40.507        -0.16337</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   1    5 24.540           NA       NA         39.997        -0.15796</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; summary(D.auto.reps, mse ~ rep + fold, include = "folds")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    fold</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> rep        1        2        3        4        5        6        7        8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1 23.06906 15.67122 25.50203 24.51830 24.54048 27.90666 19.74447 36.27542</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   2 28.73251 21.92554 22.25392 23.22799 33.15260 24.33338 24.81161 16.17814</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3 24.31128 18.54939 33.52760 22.09623 25.09248 19.56235 29.05875 16.84553</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    fold</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> rep        9       10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1 19.43045 26.45118</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   2 20.69013 27.64165</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3 19.62079 35.28078</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; summary(D.auto.reps, mse ~ rep + fold, include = "folds", subset = fold &lt;= </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> +     5)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    fold</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> rep        1        2        3        4        5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1 23.06906 15.67122 25.50203 24.51830 24.54048</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   2 28.73251 21.92554 22.25392 23.22799 33.15260</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3 24.31128 18.54939 33.52760 22.09623 25.09248</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; summary(D.auto.reps, mse ~ rep, include = "folds")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        1        2        3 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24.31093 24.29475 24.39452 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; summary(D.auto.reps, mse ~ rep, fun = sd, include = "folds")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        1        2        3 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5.607849 4.707138 6.383539 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"carData"</span>, quietly<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/source.html" class="external-link">withAutoprint</a></span><span class="op">(</span><span class="op">{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"Mroz"</span>, package<span class="op">=</span><span class="st">"carData"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">m.mroz</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span><span class="va">lfp</span> <span class="op">~</span> <span class="va">.</span>, data<span class="op">=</span><span class="va">Mroz</span>, family<span class="op">=</span><span class="va">binomial</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">cv.mroz</span> <span class="op">&lt;-</span> <span class="fu">cv</span><span class="op">(</span><span class="va">m.mroz</span>, criterion<span class="op">=</span><span class="va">BayesRule</span>, seed<span class="op">=</span><span class="fl">123</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">cvInfo</span><span class="op">(</span><span class="va">cv.mroz</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">cvInfo</span><span class="op">(</span><span class="va">cv.mroz</span>, <span class="st">"adjusted"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">cvInfo</span><span class="op">(</span><span class="va">cv.mroz</span>, <span class="st">"confint"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"Duncan"</span>, package<span class="op">=</span><span class="st">"carData"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">m.lm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">prestige</span> <span class="op">~</span> <span class="va">income</span> <span class="op">+</span> <span class="va">education</span>, data<span class="op">=</span><span class="va">Duncan</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">m.rlm</span> <span class="op">&lt;-</span> <span class="fu">MASS</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/MASS/man/rlm.html" class="external-link">rlm</a></span><span class="op">(</span><span class="va">prestige</span> <span class="op">~</span> <span class="va">income</span> <span class="op">+</span> <span class="va">education</span>,</span></span>
<span class="r-in"><span>                   data<span class="op">=</span><span class="va">Duncan</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="fu">cv</span><span class="op">(</span><span class="va">m.lm</span>, k<span class="op">=</span><span class="st">"loo"</span>, method<span class="op">=</span><span class="st">"Woodbury"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="fu">cv</span><span class="op">(</span><span class="va">m.rlm</span>, k<span class="op">=</span><span class="st">"loo"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\n install 'carData' package to run these examples\n"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; data("Mroz", package = "carData")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; m.mroz &lt;- glm(lfp ~ ., data = Mroz, family = binomial)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; summary(cv.mroz &lt;- cv(m.mroz, criterion = BayesRule, seed = 123))</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> R RNG seed set to 123</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10-Fold Cross Validation</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> method: exact</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> criterion: BayesRule</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cross-validation criterion = 0.3320053</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> bias-adjusted cross-validation criterion = 0.3260248</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 95% CI for bias-adjusted CV criterion = (0.292366, 0.3596836)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> full-sample criterion = 0.3067729</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; cvInfo(cv.mroz)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.3320053</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; cvInfo(cv.mroz, "adjusted")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.3260248</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; cvInfo(cv.mroz, "confint")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      lower      upper      level </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  0.2923660  0.3596836 95.0000000 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; data("Duncan", package = "carData")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; m.lm &lt;- lm(prestige ~ income + education, data = Duncan)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; m.rlm &lt;- MASS::rlm(prestige ~ income + education, data = Duncan)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; summary(cv(m.lm, k = "loo", method = "Woodbury"))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> n-Fold Cross Validation</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> method: Woodbury</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> criterion: mse</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cross-validation criterion = 198.5274</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> bias-adjusted cross-validation criterion = 198.1496</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> full-sample criterion = 166.8155</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; summary(cv(m.rlm, k = "loo"))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> n-Fold Cross Validation</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> criterion: mse</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cross-validation criterion = 193.3949</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> bias-adjusted cross-validation criterion = 192.9083</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> full-sample criterion = 169.7487</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># the following (due to Joshua Philipp Entrop)</span></span></span>
<span class="r-in"><span><span class="co"># produces an error:</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"Auto"</span>, package<span class="op">=</span><span class="st">"ISLR2"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">Auto</span><span class="op">$</span><span class="va">mpg_20</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">Auto</span><span class="op">$</span><span class="va">mpg</span> <span class="op">&lt;</span> <span class="fl">20</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">mlist</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>                <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>,</span></span>
<span class="r-in"><span>                \<span class="op">(</span><span class="va">p</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span><span class="va">mpg_20</span>  <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/stats/poly.html" class="external-link">poly</a></span><span class="op">(</span><span class="va">horsepower</span>, <span class="va">p</span><span class="op">)</span>, data <span class="op">=</span> <span class="va">Auto</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">cv</span><span class="op">(</span></span></span>
<span class="r-in"><span>   <span class="fu"><a href="cv.modList.html">models</a></span><span class="op">(</span><span class="va">mlist</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   data <span class="op">=</span> <span class="va">Auto</span>,</span></span>
<span class="r-in"><span>   seed <span class="op">=</span> <span class="fl">2120</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by John Fox, Georges Monette.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

